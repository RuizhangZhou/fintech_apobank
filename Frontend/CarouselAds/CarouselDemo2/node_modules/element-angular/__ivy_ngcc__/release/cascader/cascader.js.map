{"version":3,"file":"cascader.js","sources":["../../src/cascader/cascader.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, forwardRef, OnDestroy, OnInit, Renderer2 } from '@angular/core';\nimport { ElCascaderPoprs, Option } from './cascader-props';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nexport class ElCascader extends ElCascaderPoprs implements OnInit, OnDestroy, ControlValueAccessor {\n  \n  steps: any[] = []\n  menuVisible: boolean = false\n  inputHover: boolean = false\n  currentLabels: Option[] = []\n  globalListenFunc: Function\n/**\n * @param {?} renderer\n */\nconstructor(\nprivate renderer: Renderer2,\n  ) {\n    super()\n  }\n/**\n * @return {?}\n */\nclose(): void {\n    this.menuVisible = false\n    this.globalListenFunc && this.globalListenFunc()\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nclickHandle(event: MouseEvent): void {\n    event.stopPropagation()\n    if (this.elDisabled) return\n    \n    const /** @type {?} */ element: HTMLElement = /** @type {?} */(( event.target as HTMLElement))\n    const /** @type {?} */ isSelfTrigger = ['SPAN', 'I', 'INPUT'].find(v => v === element.tagName)\n    if (!isSelfTrigger) return\n    this.menuVisible = !this.menuVisible\n    \n    if (this.menuVisible) {\n      this.globalListenFunc = this.renderer.listen(\n        'document', 'click', () => {\n          this.menuVisible = false\n        }\n      )\n    } else {\n      this.globalListenFunc && this.globalListenFunc()\n    }\n  }\n/**\n * @return {?}\n */\nchangeLabels(): void {\n    const /** @type {?} */ nextValue: Option[] = []\n    this.steps.forEach((items: Option[]) => {\n      const /** @type {?} */ steps: Option[] = items.filter((item: Option) => item.active)\n      nextValue.push(steps[0])\n    })\n    this.currentLabels = nextValue\n    const /** @type {?} */ next = nextValue.map((item: Option) => item.value)\n    this.model = next\n    this.modelChange.emit(next)\n    this.controlChange(next)\n  }\n/**\n * @param {?=} event\n * @return {?}\n */\nclearValue(event?: Event): void {\n    event && event.stopPropagation()\n    this.currentLabels = []\n    const /** @type {?} */ step1 = this.options.map((option: Option) =>\n      Object.assign(option, {\n        active: false,\n      }))\n    this.steps = [step1]\n    this.menuVisible = false\n  }\n/**\n * @param {?} event\n * @param {?} step\n * @param {?} index\n * @return {?}\n */\nselectHandle(event: Event, step: number, index: number): any {\n    event.stopPropagation()\n    \n    if (this.steps[step][index].elDisabled) return\n    this.steps[step] = this.steps[step].map((item: Option, i: number) =>\n      Object.assign(item, { active: i === index }))\n    // reset steps\n    this.steps.length = step + 1\n    const /** @type {?} */ next = this.steps[step][index].children\n    \n    // go next\n    if (next && Array.isArray(next)) {\n      // change on select (props)\n      this.changeOnSelect && this.changeLabels()\n      const /** @type {?} */ nativeNext = next.map((item: Option) => Object.assign(item, { active: false }))\n      return this.steps.push(nativeNext)\n    }\n    // last step\n    this.changeLabels()\n    this.menuVisible = false\n  }\n/**\n * @return {?}\n */\nshowClearIcon(): boolean {\n    return !!(this.clearable && this.inputHover && this.currentLabels.length)\n  }\n/**\n * @return {?}\n */\nngOnInit(): void {\n    this.clearValue()\n    if (this.model && this.model.length) {\n      const /** @type {?} */ getLabel = (options: Option[], val: string) => {\n        const /** @type {?} */ item: Option = options.filter((item: Option) => item.value === val)[0]\n        return { children: item.children, val: item }\n      }\n      \n      let /** @type {?} */ options: Option[] = this.options\n      const /** @type {?} */ val: Option[] = this.model.map(v => {\n        const { children, val } = getLabel(options, v)\n        options = children\n        return val\n      })\n      this.currentLabels = val.filter(v => !!v)\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy(): void {\n    this.globalListenFunc && this.globalListenFunc()\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any): void {\n    this.model = value\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: Function): void {\n    this.controlChange = fn\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: Function): void {\n    this.controlTouch = fn\n  }\nprivate controlChange: Function = () => {}\nprivate controlTouch: Function = () => {}\n  \nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'el-cascader',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ElCascader),\n    multi: true\n  }],\n  template: `\n    <span [class]=\"'el-cascader ' +  (menuVisible ? 'is-opened ' : '') + (elDisabled ? 'is-disabled ' : '')\n      + (size ? 'el-cascader--' + size : '')\"\n      (click)=\"clickHandle($event)\"\n      (mouseenter)=\"inputHover = true\" (mouseleave)=\"inputHover = false\">\n      <el-input [readonly]=\"true\"\n        [placeholder]=\"currentLabels.length ? '' : placeholder\"\n        [size]=\"size\" [elDisabled]=\"elDisabled\"\n        [icon]=\"showClearIcon() ? 'circle-close' : 'caret-bottom'\"\n        [iconClass]=\"showClearIcon() ? 'el-cascader__clearIcon' : (menuVisible ? 'is-reverse' : '')\"\n        (icon-click)=\"clearValue($event)\">\n      </el-input>\n    \n      <span class=\"el-cascader__label\" *ngIf=\"currentLabels.length\">\n        <ng-container *ngIf=\"allLevels\">\n          <ng-container *ngFor=\"let item of currentLabels; let i = index\">\n            {{ item.label }}\n            <span *ngIf=\"i < currentLabels.length - 1\"> / </span>\n          </ng-container>\n        </ng-container>\n        <ng-container *ngIf=\"!allLevels\">\n          {{ currentLabels[currentLabels.length - 1].label }}\n        </ng-container>\n      </span>\n      <el-cascader-menu></el-cascader-menu>\n  </span>\n  `,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n];\n}\n\nfunction ElCascader_tsickle_Closure_declarations() {\n/** @type {?} */\nElCascader.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElCascader.ctorParameters;\n/** @type {?} */\nElCascader.prototype.steps;\n/** @type {?} */\nElCascader.prototype.menuVisible;\n/** @type {?} */\nElCascader.prototype.inputHover;\n/** @type {?} */\nElCascader.prototype.currentLabels;\n/** @type {?} */\nElCascader.prototype.globalListenFunc;\n/** @type {?} */\nElCascader.prototype.controlChange;\n/** @type {?} */\nElCascader.prototype.controlTouch;\n/** @type {?} */\nElCascader.prototype.renderer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}