{"version":3,"file":"message.service.js","sources":["../../src/message/message.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { ComponentRef, Injectable, Optional } from '@angular/core';\nimport { ElMessageContainer } from './message';\nimport { ExDynamicService } from '../shared/services/index';\n\nexport interface Options {\n  type?: string\n  iconClass?: string\n  customClass?: string\n  duration?: number\n  showClose?: boolean\n  center?: boolean\n  zIndex?: number\n  onClose?: Function\n}\nexport class ElMessageService {\n  \n  components: any[] = []\n/**\n * @param {?} root\n * @param {?} dynamic\n */\nconstructor(\nprivate root: ElMessageContainer,\nprivate dynamic: ExDynamicService\n  ) {\n    this.createComponent()\n  }\n/**\n * @param {?} msg\n * @return {?}\n */\nshow(msg: string): void {\n    if (this.components.length === 0 || this.components[this.components.length - 1].init) {\n      this.createComponent()\n    }\n    // mark the component\n    const /** @type {?} */ current = this.components[this.components.length - 1]\n    current.init = true\n  \n    current.instance.onDestroy = () => {\n      // component detach and destroy\n      this.dynamic.destroy(current.copy)\n      // remove empty item\n      const /** @type {?} */ index = this.components.findIndex(com => com.id === current.id)\n      this.components.splice(index, 1)\n    }\n    const /** @type {?} */ timer = setTimeout(() => {\n      current.instance.show(msg)\n      clearTimeout(timer)\n    }, 0)\n  }\n/**\n * @param {?} msg\n * @return {?}\n */\nsuccess(msg: string): void {\n    this.setOptions({ type: 'success' })\n    this.show(msg)\n  }\n/**\n * @param {?} msg\n * @return {?}\n */\nwarning(msg: string): void {\n    this.setOptions({ type: 'warning' })\n    this.show(msg)\n  }\n/**\n * @param {?} msg\n * @return {?}\n */\ninfo(msg: string): void {\n    this.setOptions({ type: 'info' })\n    this.show(msg)\n  }\n/**\n * @param {?} msg\n * @return {?}\n */\nerror(msg: string): void {\n    this.setOptions({ type: 'error' })\n    this.show(msg)\n  }\n/**\n * @param {?} options\n * @return {?}\n */\nsetOptions(options: Options): void {\n    if (this.components.length === 0 || this.components[this.components.length - 1].init) {\n      this.createComponent()\n    }\n    const /** @type {?} */ last = this.components[this.components.length - 1]\n    last.instance = Object.assign(last.instance, options)\n  }\n/**\n * @return {?}\n */\ncreateComponent(): void {\n    const /** @type {?} */ com: ComponentRef<any> = this.dynamic.generator(ElMessageContainer)\n    this.components.push({\n      instance: com.instance,\n      id: com.instance.id,\n      copy: com,\n      init: false\n    })\n  }\n  \nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElMessageContainer, decorators: [{ type: Optional }, ]},\n{type: ExDynamicService, },\n];\n}\n\nfunction ElMessageService_tsickle_Closure_declarations() {\n/** @type {?} */\nElMessageService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElMessageService.ctorParameters;\n/** @type {?} */\nElMessageService.prototype.components;\n/** @type {?} */\nElMessageService.prototype.root;\n/** @type {?} */\nElMessageService.prototype.dynamic;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}